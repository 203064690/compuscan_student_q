<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:form="" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:dt="http://www.thymeleaf.org/dandelion/datatables">
<head>
    <title>Student Marks</title>
    <link rel="stylesheet" type="text/css" href="/StyleSheet1.css">
    <script src="js/handleForm.js"></script>
    <script type="text/javascript">
    function myFunction() {
    var myTable = document.getElementById("myTableId"), avgVal, sumVal = 0;
    rowCount = myTable.rows.length - 1;// minus the header
        for(var i = 1; i < myTable.rows.length; i++) {
            sumVal = sumVal + parseFloat(myTable.rows[i].cells[1].innerHTML);
        }
        avgVal =parseFloat(sumVal / rowCount);
        document.getElementById("val").innerHTML = "Total: "+ avgVal;
    }
    </script>
    <title>Student Marks</title>
</head>
<body>
<div class="header">
    <h2><span th:utext="${msg}"></span>  Report</h2>
</div>
<table id="myTableId" dt:table="true" class="table">
    <thead>
    <tr class="header">
        <th>Student No</th>
        <th>Marks</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="report: ${reports}" align="center">
        <td th:text="${report.getStud_no()}" />
        <td th:text="${report.getStud_mark()}" />
    </tr>
    </tbody>
</table>
<br/>
<div class="input-group" align="center">
    <button class="btn" onclick="myFunction()">Calculate Average Mark</button> <span id="val"></span>
</div>
<br/>
<a href="home" class="btn">Back</a>
</body>
</html>